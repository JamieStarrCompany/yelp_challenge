{% extends "base.html" %}
{% import 'bootstrap/wtf.html' as wtf %}

{% block content %}
<div class="jumbotron big-banner" style="height : 100%; padding-top: 15px; background-image:url(https://images.unsplash.com/photo-1529599087-bcf1dc4a7ae4?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1304&q=80); background-size: cover">
	<div class="container">
		{% with messages = get_flashed_messages() %}
        	{% if messages %}
        		<ul>
            	{% for message in messages %}
            	<li>{{ message }}</li>
            {% endfor %}
        		</ul>
        	{% endif %}
        {% endwith %}
    </div>
	<h1 align="center"> Top Restaurant </h1>
	<div>
		<p>
			{% if rest %}
				Restaurant name: {{rest['rest']['name']}}<br>
				{{rest['rest']['stars']}} stars <br>
				{{rest['rev_count']}} reviews <br>
				Address: {{rest['rest']['address']}}, {{rest['rest']['city']}},
				{{rest['rest']['state']}}, {{rest['rest']['postal_code']}}<br> <br>
				<!-- maybe check if all the above fields exist, for example, not all
			restaurants have an address or postal_code -->

				{% if photos != [] %}
					Photos: <br>
					{% for p in photos %}
						<figure>
							<img src="/static/{{p['p']['id']}}.jpg" alt='missing' />
							{% if p['p']['caption'] != '' %}
								<figcaption>{{p['p']['caption']}}</figcaption>
							{% endif %}
						</figure>
					{% endfor %}
				{% endif %}
		</p>
		<p>
				{% if top_review %}
				<div class="jumbotron big-banner" style="height : 500px; padding-top: 15px;"> 
				<h2>Top Review</h2>
					by {{top_review['u']['name']}}: <br>
					{{top_review['r']['stars']}} stars <br>
					{{top_review['r']['text']}} <br>

					{% if ad_rests != [] %}
						Other restaurants in the area: <br>
						<ul>
							{% for r in ad_rests %}
								<li>{{r['name']}}</li>
							{% endfor %}
						</ul>
					</div>
					{% endif %}

				{% endif %}

			{% else %}
				No restaurant found<br>
			{% endif %}

		</p>
	</div>
</div>
{% endblock %}
